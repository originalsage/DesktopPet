# DesktopPet 桌面宠物

一个基于 PyQt5 开发的桌面宠物应用，在桌面上显示一个可爱的跟随鼠标的宠物节点。

[![下载最新版本](https://img.shields.io/badge/下载-最新版本-brightgreen)](https://github.com/originalsage/DesktopPet/releases)
[![快速开始](https://img.shields.io/badge/使用-快速开始-blue)](#快速开始)

## 功能特性

- 🐾 在桌面显示一个可爱的粉色节点宠物
- 🎯 宠物会智能跟随鼠标指针移动
- 👻 支持穿透模式，使宠物不会阻挡鼠标操作
- 📋 系统托盘管理，可随时隐藏/显示或退出程序
- 🖱️ 支持拖拽移动宠物位置
- ⌨️ 支持快捷键操作

## 快速开始

### 方法一：直接运行可执行文件（推荐给普通用户）

1. 前往[发布页面](https://github.com/originalsage/DesktopPet/releases)下载最新版本的exe文件
2. 双击下载的exe文件即可运行

注意：如果是第一次运行，可能需要允许防火墙访问权限。程序启动后将在桌面显示宠物，并在系统托盘中添加图标。

### 方法二：源码运行（需要Python环境）

#### 环境要求

- Python 3.6+
- PyQt5

#### 安装依赖

```
pip install PyQt5
```

#### 运行程序

```
python main.py
```

程序启动后将在桌面显示宠物，并在系统托盘中添加图标。

## 如何打包成exe文件

如果您想要自己打包程序，可以按照以下步骤操作：

### 1. 安装PyInstaller

```
pip install pyinstaller
```

### 2. 打包程序

在项目根目录下运行以下命令：

```
pyinstaller --onefile --windowed --icon=img/lls.png --add-data "img;img" main.py
```

参数说明：
- `--onefile`: 打包成单个exe文件
- `--windowed`: 不显示控制台窗口
- `--icon`: 设置exe文件图标
- `--add-data`: 将图片资源打包进exe文件

### 3. 运行打包后的程序

打包完成后，会在`dist`目录下生成`main.exe`文件，双击即可运行。
只需将此exe文件发送给朋友即可，无需额外文件。

## 使用说明

### 基本操作

- **跟随鼠标**: 宠物会自动跟随鼠标指针移动
- **拖拽移动**: 鼠标左键按住宠物可将其拖拽到任意位置
- **穿透模式**: 按 `V` 键或通过系统托盘菜单切换穿透状态，穿透状态下鼠标事件会穿过宠物传递给下层窗口
- **隐藏/显示**: 通过系统托盘菜单可以隐藏或显示宠物

### 系统托盘菜单

右键点击宠物或系统托盘图标可打开菜单：

- 切换穿透状态：切换宠物是否响应鼠标事件
- 隐藏桌宠/显示桌宠：控制宠物的显示/隐藏
- 退出程序：完全退出应用程序

### 快捷键

- `V` 键：快速切换穿透状态

### 退出程序

可以通过以下任一方式退出程序：

1. 系统托盘菜单 -> 退出程序
2. 直接关闭终端（如果从终端启动）

## 文件结构

```
DesktopPet/
├── main.py          # 主程序文件
├── img/             # 图片资源目录
│   ├── NodeCircle.png  # 宠物主体图像
│   ├── NodeHalo.png    # 宠物光晕效果图像
│   └── lls.png         # 托盘图标
├── dist/            # 打包后的可执行文件目录
│   └── main.exe     # 可执行文件
├── README.md        # 说明文档
└── requirements.txt # 依赖列表
```

## 技术细节

- 使用 PyQt5 构建图形界面
- 采用 QTimer 定时器实现流畅动画效果
- 支持窗口置顶、无边框、透明背景等特性
- 实现了浮点数坐标计算以提高移动精度
- 使用 PyInstaller 打包为独立可执行文件

## 许可证

MIT License